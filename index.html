<!DOCTYPE html>
<html>
  <head>
    <title>Тестирование</title>
    <link rel="stylesheet" href="./styles/index.css" />
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/jsxgraph/1.3.0/jsxgraphcore.js"
    ></script>
  </head>
  <body>
    <div class="container">
      <form>
        <input type="text" />
      </form>
      <div id="box" class="jxgbox"></div>
      <div id="output"></div>
    </div>

    <script type="text/javascript">
      // Создаем объект JXG.Board и указываем его размеры
      const board = JXG.JSXGraph.initBoard("box", {
        boundingbox: [-25, 25, 25, -25],
        axis: true,
      });
      const box = document.getElementById("box");
      box.style.width = "100vw";
      box.style.height = "100vh";
      window.addEventListener("resize", () => {
        board.resize(box.clientWidth, box.clientHeight);
      });

      // Создаем точки
      const A = board.create("point", [-5, 0], {
        name: "A",
        size: 4,
        fixed: true,
      });
      const B = board.create("point", [0, 10], {
        name: "B",
        size: 4,
        fixed: true,
      });
      const C = board.create("point", [5, 0], {
        name: "C",
        size: 4,
        fixed: true,
      });
      const D = board.create("point", [0, -10], {
        name: "D",
        size: 4,
        fixed: true,
      });

      // Создаем точки E и F
      const E = board.create("midpoint", [A, D], { name: "E", size: 4 });
      const F = board.create("midpoint", [D, C], { name: "F", size: 4 });

      // Создаем линии для ромба
      const AB = board.create("line", [A, B], {
        straightFirst: false,
        straightLast: false,
        strokeWidth: 3,
      });
      const BC = board.create("line", [B, C], {
        straightFirst: false,
        straightLast: false,
        strokeWidth: 3,
      });
      const CD = board.create("line", [C, D], {
        straightFirst: false,
        straightLast: false,
        strokeWidth: 3,
      });
      const DA = board.create("line", [D, A], {
        straightFirst: false,
        straightLast: false,
        strokeWidth: 3,
      });

      // Создаем линии для треугольника
      const EB = board.create("line", [E, B], {
        straightFirst: false,
        straightLast: false,
        strokeWidth: 3,
      });
      const BF = board.create("line", [B, F], {
        straightFirst: false,
        straightLast: false,
        strokeWidth: 3,
      });
      const FE = board.create("line", [F, E], {
        straightFirst: false,
        straightLast: false,
        strokeWidth: 3,
      });

      // Задаем цвет заливки для треугольника
      const triangle = board.create("polygon", [E, B, F], {
        fillColor: "#c0c0c0",
      });

      // const J = board.create("midpoint", [E, F], { name: "J", size: 4 });

      //длина EF
      const lengthEF = FE.L();
      const lengthBF = BF.L();

      const radius =
        (lengthEF / 2) *
        Math.sqrt((2 * lengthBF - lengthEF) / (2 * lengthBF + lengthEF));
      console.log(radius);

      //биссектрисы треугольника
      const bisectorE = board.create("bisector", [F, E, B], { visible: false });
      const bisectorB = board.create("bisector", [F, B, E], { visible: false });
      const bisectorF = board.create("bisector", [B, F, E], { visible: false });

      //центр окружности
      const incenter = board.create(
        "intersection",
        [bisectorE, bisectorB, bisectorF],
        { visible: false }
      );

      const circle = board.create("circle", [incenter, radius]);

      const intersection1 = board.create("intersection", [circle, BF, 0]);
      const intersection2 = board.create("intersection", [circle, EB, 0]);
      const intersection3 = board.create("intersection", [circle, FE, 0]);

      // Create new points for the intersections
      const H = board.create("point", [intersection1.X(), intersection1.Y()], {
        name: "H",
        size: 4,
        fixed: true,
      });
      const G = board.create("point", [intersection2.X(), intersection2.Y()], {
        name: "G",
        size: 4,
        fixed: true,
      });
      const J = board.create("point", [intersection3.X(), intersection3.Y()], {
        name: "J",
        size: 4,
        fixed: true,
      });

      const triangleGBH = board.create("polygon", [G, B, H], {
        fillColor: "#ffcc00", // цвет заливки треугольника
        borders: { strokeColor: "#000000" }, // цвет и толщина линий
      });

      const T = board.create(
        "point",
        [(G.X() + H.X()) / 2, (G.Y() + H.Y()) / 2],
        {
          name: "T",
          size: 4,
          fixed: true,
        }
      );
    </script>
  </body>
</html>
